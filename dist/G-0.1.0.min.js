!function(a,b,c){"function"==typeof define&&define.amd?define(function(){return b.call(c)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=c.call(b):b[a]=c.call(b)}("G",this,function(){!function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.initialize&&this.initialize.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}(),!function(a,b,c){"function"==typeof define&&define.amd?define(function(){return b.call(c)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=c.call(b):b[a]=c.call(b)}("Emit",this,function(){var a=function(){};return a.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},one:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(["one",b])},off:function(a,b){if(this._events=this._events||{},a in this._events!=!1&&!(this._events[a].splice(this._events[a].indexOf(b),1).length>0))for(var c=0;c<this._events[a].length;c++)"object"==typeof this._events[a][c]&&"one"===this._events[a][0]&&this._events[a][c][1]===b&&this._events[a].splice(this._events[a][c],1)},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)"object"==typeof this._events[a][b]?(this._events[a][b][1].apply(this,arguments[1]||void 0),this._events[a].splice(this._events[a][b],1)):this._events[a][b].apply(this,arguments[1]||void 0)}},a.mixin=function(b){for(var c=["on","one","off","trigger"],d=0;d<c.length;d++)"function"==typeof b?b.prototype[c[d]]=a.prototype[c[d]]:b[c[d]]=a.prototype[c[d]]},a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(pivot=b?b:0,!this)throw new TypeError;if(length=this.length,0===length||pivot>=length)return-1;for(0>pivot&&(pivot=length-Math.abs(pivot)),c=pivot;length>c;c++)if(this[c]===a)return c;return-1}),function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),Object.keys=Object.keys||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)(a,c)&&b.push(c);return b};var a=function(){var a=Date.now(),b=a,c=0,d=1/0,e=0,f=0,g=1/0,h=0,i=0,j=0,k=document.createElement("div");k.id="stats",k.addEventListener("mousedown",function(a){a.preventDefault(),p(++j%2)},!1),k.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",k.appendChild(l);var m=document.createElement("div");m.id="fpsText",m.innerHTML="FPS",l.appendChild(m);var n=document.createElement("div");n.id="ms",n.style.cssText="display:none",k.appendChild(n);var o=document.createElement("div");o.id="msText",o.innerHTML="MS",n.appendChild(o);var p=function(a){switch(j=a){case 0:l.style.display="block",n.style.display="none";break;case 1:l.style.display="none",n.style.display="block"}};return{REVISION:11,domElement:k,setMode:p,begin:function(){a=Date.now()},end:function(){var j=Date.now();return c=j-a,d=Math.min(d,c),e=Math.max(e,c),o.textContent=c+" MS ("+d+"-"+e+")",i++,j>b+1e3&&(f=Math.round(1e3*i/(j-b)),g=Math.min(g,f),h=Math.max(h,f),m.textContent=f+" FPS ("+g+"-"+h+")",b=j,i=0),j},update:function(){a=this.end()}}};(function(){var a=this;if(a._)return a._;var b=function(a){return a instanceof b?a:this instanceof b?(this._wrapped=a,void 0):new b(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):a._=b,b.each=function(a,c,d){if(null!=a)if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(c,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(c.call(d,a[e],e,a)===breaker)return}else for(var g=b.keys(a),e=0,f=g.length;f>e;e++)if(c.call(d,a[g[e]],g[e],a)===breaker)return},b.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.keys=Object.keys||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[];for(var d in a)b.has(a,d)&&c.push(d);return c},b.extend=function(a){return b.each(Array.prototype.slice.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a}}).call(this),function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):(window.WatchJS=a(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){"use strict";var a={noMore:!1},b=[],c=function(a){var b={};return a&&"[object Function]"==b.toString.call(a)},d=function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=function(a,b){var c=[],e=[];if("string"!=typeof a&&"string"!=typeof b){if(d(a))for(var f=0;f<a.length;f++)void 0===b[f]&&c.push(f);else for(var f in a)a.hasOwnProperty(f)&&void 0===b[f]&&c.push(f);if(d(b))for(var g=0;g<b.length;g++)void 0===a[g]&&e.push(g);else for(var g in b)b.hasOwnProperty(g)&&void 0===a[g]&&e.push(g)}return{added:c,removed:e}},f=function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=a[c];return b},g=function(a,b,c,d){try{Object.observe(a[b],function(a){d(a)})}catch(e){try{Object.defineProperty(a,b,{get:c,set:d,enumerable:!0,configurable:!0})}catch(f){try{Object.prototype.__defineGetter__.call(a,b,c),Object.prototype.__defineSetter__.call(a,b,d)}catch(g){throw new Error("watchJS error: browser not supported :/")}}}},h=function(a,b,c){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:c})}catch(d){a[b]=c}},i=function(){c(arguments[1])?j.apply(this,arguments):d(arguments[1])?k.apply(this,arguments):l.apply(this,arguments)},j=function(a,b,c,e){if("string"!=typeof a&&(a instanceof Object||d(a))){var f=[];if(d(a))for(var g=0;g<a.length;g++)f.push(g);else for(var h in a)a.hasOwnProperty(h)&&f.push(h);k(a,f,b,c,e),e&&w(a,"$$watchlengthsubjectroot",b,c)}},k=function(a,b,c,e,f){if("string"!=typeof a&&(a instanceof Object||d(a)))for(var g in b)b.hasOwnProperty(g)&&l(a,b[g],c,e,f)},l=function(a,b,e,f,g){"string"!=typeof a&&(a instanceof Object||d(a))&&(c(a[b])||(null!=a[b]&&(void 0===f||f>0)&&j(a[b],e,void 0!==f?f-1:f),p(a,b,e,f),g&&(void 0===f||f>0)&&w(a,b,e,f)))},m=function(){c(arguments[1])?n.apply(this,arguments):d(arguments[1])?o.apply(this,arguments):u.apply(this,arguments)},n=function(a,b){if(!(a instanceof String)&&(a instanceof Object||d(a))){var c=[];if(d(a))for(var e=0;e<a.length;e++)c.push(e);else for(var f in a)a.hasOwnProperty(f)&&c.push(f);o(a,c,b)}},o=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&u(a,b[d],c)},p=function(b,c,d,e){var f=b[c];t(b,c),b.watchers||h(b,"watchers",{}),b.watchers[c]||(b.watchers[c]=[]);for(var i=0;i<b.watchers[c].length;i++)if(b.watchers[c][i]===d)return;b.watchers[c].push(d);var k=function(){return f},l=function(g){var h=f;f=g,0!==e&&b[c]&&j(b[c],d,void 0===e?e:e-1),t(b,c),a.noMore||h!==g&&(q(b,c,"set",g,h),a.noMore=!1)};g(b,c,k,l)},q=function(a,b,c,d,e){if(b)for(var f=0;f<a.watchers[b].length;f++)a.watchers[b][f].call(a,b,c,d,e);else for(var b in a)a.hasOwnProperty(b)&&q(a,b,c,d,e)},r=["pop","push","reverse","shift","sort","slice","unshift"],s=function(a,b,c,d){h(a[b],d,function(){var e=c.apply(a[b],arguments);return l(a,a[b]),"slice"!==d&&q(a,b,d,arguments),e})},t=function(a,b){if(a[b]&&!(a[b]instanceof String)&&d(a[b]))for(var c,e=r.length;e--;)c=r[e],s(a,b,a[b][c],c)},u=function(a,b,c){for(var d=0;d<a.watchers[b].length;d++){var e=a.watchers[b][d];e==c&&a.watchers[b].splice(d,1)}x(a,b,c)},v=function(){for(var a=0;a<b.length;a++){var c=b[a];if("$$watchlengthsubjectroot"===c.prop){var d=e(c.obj,c.actual);(d.added.length||d.removed.length)&&(d.added.length&&k(c.obj,d.added,c.watcher,c.level-1,!0),c.watcher.call(c.obj,"root","differentattr",d,c.actual)),c.actual=f(c.obj)}else{var d=e(c.obj[c.prop],c.actual);if(d.added.length||d.removed.length){if(d.added.length)for(var g=0;g<c.obj.watchers[c.prop].length;g++)k(c.obj[c.prop],d.added,c.obj.watchers[c.prop][g],c.level-1,!0);q(c.obj,c.prop,"differentattr",d,c.actual)}c.actual=f(c.obj[c.prop])}}},w=function(a,c,d,e){var g;g="$$watchlengthsubjectroot"===c?f(a):f(a[c]),b.push({obj:a,prop:c,actual:g,watcher:d,level:e})},x=function(a,c,d){for(var e=0;e<b.length;e++){var f=b[e];f.obj==a&&f.prop==c&&f.watcher==d&&b.splice(e,1)}};return setInterval(v,50),a.watch=i,a.unwatch=m,a.callWatchers=q,a});var b,c,d={};d.setCanvas=function(){var a=[];_.each(arguments,function(b){a.push(b)});for(var e=0;e<a.length;e++){var f=a[e];this.canvas||this.ctx||(this.canvas=a[e].tagName&&"CANVAS"===f.tagName?f:"string"==typeof f?document.getElementById(f):document.body.appendChild(document.createElement("canvas")),b=this.canvas,this.ctx=c=this.canvas.getContext("2d")),"number"==typeof f&&this.canvas&&("number"==typeof a[e+1]?(this.canvas.width=a[e],this.canvas.height=a[e+1],e++):this.canvas.width=a[e])}return this.canvas||this.ctx||(this.canvas=b=document.body.appendChild(document.createElement("canvas")),b.width=window.innerWidth,b.height=window.innerHeight,c=this.ctx=b.getContext("2d")),d.stage||(d.stage=new d.Stage),this.width=d.stage.width=this.canvas.width,this.height=d.stage.height=this.canvas.height,{canvas:this.canvas,ctx:c}},d.clearCanvas=function(){d.canvas&&d.ctx&&d.ctx.clearRect(0,0,d.canvas.width,d.canvas.height)},d.getCanvas=function(){return b},d.getContext=function(){return c},d.Stage=Class.extend({initialize:function(){if(!b||!c)throw"Error: A canvas must be set before creating a Stage instance. Please call the G.setCanvas method first.";this.shapes=[],this._currentId=0,this.width=b.width,this.height=b.height},render:function(){d.clearCanvas();var a=this;d.trigger("render"),a.trigger("render");for(var b=0;b<this.shapes.length;b++){var c=this.shapes[b];"object"==typeof c&&(d.trigger("renderShape",[c]),a.trigger("renderShape",[c]),c.render())}d.trigger("renderComplete"),a.trigger("renderComplete")},add:function(a){if(!a)return!1;if(this.has(a))return!1;this.trigger("add",arguments);var b=this._currentId,c=this.shapes.indexOf(a);if(a="object"==typeof a?a:this.shapes[b],-1===c&&"object"==typeof a)this.shapes[b]=a,this._currentId++;else if(c>-1)return console.log("Warning: "+a.shape+" already exists. Not re-adding."),!1;return a.collections&&0===a.collections.length?b:(a.collections.push(this),b)},remove:function(a){if("number"==typeof a&&(a=this.get(a)),"undefined"==typeof a||!a.render||!this.has(a))return!1;var b=this.getId(a);if(this.trigger("remove",arguments),a.trigger("remove",this),delete this.shapes[b],!a.collections||a.collections&&0===a.collections.length)return a;var b=a.collections.indexOf(this);return a.collections.splice(b,1),a},has:function(a){if(Array.isArray(a))var b=a.map(function(a){return this.has(a)},this);else b=-1!==this.shapes.indexOf(a);return b},get:function(a){return this.shapes[a]},getId:function(a){return this.shapes.indexOf(a)},each:function(a){for(var b=0;b<this.shapes.length;b++)"undefined"!=typeof this.shapes[b]&&a(this.shapes[b])},length:function(){if(-1===this.shapes.indexOf(void 0))return this.shapes.length;for(var a=0,b=0;b<this.shapes.length;b++)"undefined"!=typeof this.shapes[b]&&a++;return a}}),d.render=function(a){return 0===d.stage.length()?!1:(d.trigger("render"),d.stage.render(a),void 0)},d.animate=function(a){"function"==typeof a&&window.cancelAnimationFrame(d.animate),"function"==typeof a&&d.on("animate",a),d.trigger("animate",arguments),d.trigger("animate:start",arguments),a="number"==typeof a||void 0,d.deltaFramerate=d.getdeltaFramerate(),d.showFramerate!==!0||d.stats.stats?d.showFramerate&&d.stats.stats?d.stats.update():!d.showFramerate&&d.stats.stats&&d.stats.remove():d.stats.create(),d.isPaused||(60===d.desiredFramerate?window.requestAnimationFrame(d.animate):window.setTimeout(d.animate,1e3/d.desiredFramerate)),d.trigger("animate:end",arguments)},d.pause=function(){d.isPaused=!0,d.trigger("pause",arguments)},d.unpause=function(){"undefined"!=typeof d.isPaused&&(d.isPaused=!1,d.animate(),d.trigger("unpause",arguments))};var e=d.Shape=Class.extend({initialize:function(a,b){this.mergeValues(a,b),this.add(this.addToCollection),this.addToCollection&&delete this.addToCollection},mergeValues:function(a,b){if(a||b){var c={pos:{x:0,y:0},vel:{x:0,y:0},width:0,height:0,rotation:0,color:"#000",collections:[],isHidden:!1},e=c;"object"!=typeof b&&(b={});var b=b||{};e=_.extend(e,b,a);for(var f in e){if("undefined"!=typeof a[f])if("object"==typeof a[f]&&"object"==typeof e[f])for(var g in a[f])e[f][g]=a[f][g];else e[f]=a[f];this[f]="object"==typeof e[f]&&e[f].x&&e[f].y&&2===_.keys(e[f]).length?new d.Vector(e[f].x,e[f].y):e[f]}}},bounds:function(a){var b=this.width/2,c=this.height/2;if("object"!=typeof a)return{left:this.pos.x-b,right:this.pos.x+b,top:this.pos.y-c,bottom:this.pos.y+c};for(var d in a)"top"===d?this.pos.y=a[d]+c:"bottom"===d?this.pos.y=a[d]-c:"left"===d?this.pos.x=a[d]+b:"right"===d&&(this.pos.x=a[d]-b)},posInBounds:function(a,b){var c=this.bounds();return a>c.left&&a<c.right&&b>c.top&&b<c.bottom},render:function(){this.isHidden||(this.trigger("render",arguments),0!==this.rotation?this.rotate(this.rotation):this._render())},rotate:function(a){this.trigger("rotate",arguments),c.save(),c.translate(this.pos.x,this.pos.y),c.rotate(a),this._render(0,0),c.restore()},remove:function(a){if(a&&a instanceof d.Collection){var b=a.remove(this);"number"==typeof b&&this.trigger("remove",a)}else if(this.collections&&this.collections.length>0)_.each(this.collections,function(a){var b=a.remove(this);"number"==typeof b&&this.trigger("remove",a)},this);else if(d.stage){var b=d.stage.remove(this);"number"==typeof b&&this.trigger("remove",d.stage)}},add:function(a){if(a===!1)return!1;if(a&&a instanceof d.Collection){var b=a.add(this);"number"==typeof b&&this.trigger("add",a)}else this.collections&&this.collections.length>0&&_.each(this.collections,function(a){var b=a.add(this);"number"==typeof b&&this.trigger("add",a)},this);if(d.stage){var b=d.stage.add(this);"number"==typeof b&&this.trigger("add",d.stage),"undefined"!=typeof b&&(this.stageId=b)}},hide:function(){this.trigger("hide",arguments),this.isHidden=!0},show:function(){this.trigger("show",arguments),this.isHidden=!1},toggleHidden:function(){this.isHidden?this.trigger("show",arguments):this.trigger("hide",arguments),this.isHidden=!this.isHidden},isVisible:function(){return this.isHidden?!1:this.bounds().right>0&&this.bounds().left<b.width&&this.bounds().bottom>0&&this.bounds().top<b.height?!0:!1}});d.Circle=e.extend({initialize:function(a){if("object"!=typeof a&&arguments.length>2){var b={};b.pos={x:arguments[0],y:arguments[1]},b.radius=arguments[2],"number"==typeof arguments[3]&&(b.vel={x:arguments[3]}),"number"==typeof arguments[4]&&(b.vel.y=arguments[4]),"string"==typeof arguments[5]&&(b.color=arguments[5]);var a=arguments[0]=b}this.shape="circle",this.radius=a.radius,this._super&&this._super.apply(this,arguments),this.width=this.height=2*this.radius},_render:function(a,b,d){if(c.fillStyle!==this.color&&(c.fillStyle=this.color),"number"!=typeof a)var a=this.pos.x;if("number"!=typeof b)var b=this.pos.y;if("number"!=typeof d)var d=this.radius;c.beginPath(),c.arc(a,b,d,0,2*Math.PI,!1),c.closePath(),c.fill()}}),d.Rect=e.extend({initialize:function(a){if("object"!=typeof a&&arguments.length>4){var b={};b.pos={x:arguments[0],y:arguments[1]},b.width=arguments[2],b.height=arguments[3],arguments[4]&&(b.vel={x:arguments[4]}),arguments[5]&&(b.vel.y=arguments[5]),arguments[6]&&(b.color=arguments[6]);var a=arguments[0]=b}this.shape="rect",this._super&&this._super.apply(this,arguments),this.pos.y>this.pos.y+this.height&&(this.pos.y=this.pos.y+this.height,this.height=Math.abs(this.height)),this.pos.x>this.pos.x+this.width&&(this.pos.x=this.pos.x+this.width,this.width=Math.abs(this.width))},_render:function(a,b,d,e){c.fillStyle!==this.color&&(c.fillStyle=this.color),"number"==typeof a&&"number"==typeof b?c.fillRect(a-this.width/2,b-this.width/2,this.width,this.height):"number"==typeof a&&"number"==typeof b&&"number"==typeof d&&"number"==typeof e?c.fillRect(a-d/2,b-e/2,d,e):c.fillRect(this.pos.x-this.width/2,this.pos.y-this.height/2,this.width,this.height)}}),d.Line=e.extend({initialize:function(a){var b={pos:{x1:0,y1:0,x2:0,y2:0,x:0,y:0}};if(arguments[1]="object"==typeof arguments[1]?_.extend(arguments[1],b):b,"object"!=typeof a&&arguments.length>3){var c={};c.pos={x1:arguments[0],y1:arguments[1],x2:arguments[2],y2:arguments[3]},arguments[4]&&(c.vel={x:arguments[4]}),arguments[5]&&(c.vel.y=arguments[5]),arguments[6]&&(c.color=arguments[6]);var a=arguments[0]=c}this.shape="line",this._super&&this._super.apply(this,arguments),this.setDimensions().setCenter();var d=this;watch(this,["pos","width","height","bounds"],function(){d.setValues.apply(d,arguments)})},setValues:function(a){-1!==["x, y, width","height"].indexOf(a)&&(WatchJS.noMore=!0,this.setPoints.apply(this,arguments)),-1!==["x1","y1","x2","y2"].indexOf(a)&&(WatchJS.noMore=!0,this.setDimensions().setCenter().setPoints())},setPoints:function(a,b,c,d){if("x"===a){var e=this.pos.x1+(c-d),f=this.pos.x2+(c-d);Math.round(this.pos.x1)!==Math.round(e)&&(this.pos.x1=Math.round(e)),Math.round(this.pos.x2)!==Math.round(f)&&(this.pos.x2=Math.round(f))}if("y"===a){var g=this.pos.y1+(c-d),h=this.pos.y2+(c-d);Math.round(this.pos.y1)!==Math.round(g)&&(this.pos.y1=Math.round(g)),Math.round(this.pos.y2)!==Math.round(h)&&(this.pos.y2=Math.round(h))}if("width"===a){var e=this.pos.x1-(c-d)/2,f=this.pos.x2+(c-d)/2;this.pos.x1!==e&&(this.pos.x1=e),this.pos.x2!==f&&(this.pos.x2=f)}if("height"===a){var g=this.pos.y1-(c-d)/2,h=this.pos.y2+(c-d)/2;this.pos.y1!==g&&(this.pos.y1=g),this.pos.y2!==h&&(this.pos.y2=h)}},setDimensions:function(){var a=Math.abs(this.pos.x2-this.pos.x1),b=Math.abs(this.pos.y2-this.pos.y1);return this.width!==a&&(this.width=a),this.height!==b&&(this.height=b),this},setCenter:function(){var a=this.pos.x2-(this.pos.x2-this.pos.x1)/2,b=this.pos.y2-(this.pos.y2-this.pos.y1)/2;return this.pos.x!==a&&(this.pos.x=a),this.pos.y!==b&&(this.pos.y=b),this},_render:function(a,b){c.fillStyle!==this.fillColor&&(c.fillStyle=this.fillColor),c.strokeStyle!==this.color&&(c.strokeStyle=this.color),c.beginPath(),a&&b||(c.moveTo(this.pos.x1,this.pos.y1),c.lineTo(this.pos.x2,this.pos.y2)),c.stroke(),c.closePath()}}),d.Image=d.Rect.extend({initialize:function(a){function b(){this.loaded=!0,0===this.width&&(this.width=this.image.naturalWidth),0===this.height&&(this.height=this.image.naturalHeight)}if(arguments.length>2){var c={};c.src=arguments[0],c.pos={x:arguments[1],y:arguments[2]},arguments[3]&&(c.vel={x:arguments[3]}),arguments[4]&&(c.vel.y=arguments[4]),arguments[5]&&(c.width=arguments[5]),arguments[6]&&(c.height=arguments[6]);var a=arguments[0]=c}else if("object"!=typeof a)throw new Error("You must pass in either an object or multiple arguments src,x,y,vx,vy,width,height");if(!a.src)throw new Error("A G.Image must have a 'src' attribute.");this.shape="image";var d={src:"",clip:{x:0,y:0,width:0,height:0}};arguments[1]="object"==typeof arguments[1]?_.extend(arguments[1],d):d,this._super&&this._super.apply(this,arguments),this.image=new Image,this.image.src=this.src,this.loaded=!1;var e=this;this.image.addEventListener("load",function(){b.call(e)})},onload:function(a){"function"==typeof a&&this.image.addEventListener("load",a)},_render:function(a,b,d,e){if(this.loaded){if("number"!=typeof a)var a=this.pos.x;if("number"!=typeof b)var b=this.pos.y;if("number"!=typeof d)var d=this.width;if("number"!=typeof e)var e=this.height;0!==this.clip.width&&0!==this.clip.height?c.drawImage(this.image,this.clip.x,this.clip.y,this.clip.width,this.clip.height,a-d/2,b-e/2,d,e):c.drawImage(this.image,a-d/2,b-e/2,d,e)}}});var f=function(){var a=Math.ceil(1e3/(Date.now()-g));return g=Date.now(),a};d.getdeltaFramerate=function(){d.framerate=f();var a=d.desiredFramerate/d.framerate*d.timeScale;return a},d.random=function(a,b){var b="number"==typeof b?b:0,a="number"==typeof a?a:1;return Math.round(b+Math.random()*(a-b))},d.random.float=function(a,b){var b="number"==typeof b?b:0,a="number"==typeof a?a:1;return b+Math.random()*(a-b)},d.random.color=function(){return"rgb("+d.random(255)+","+d.random(255)+","+d.random(255)+")"},d.random.item=function(a){return Array.isArray(a)?a[d.random(a.length-1)]:void 0},d.stats={create:function(){var b=this.stats=new a;this.el=b.domElement,document.body.appendChild(this.el),this.el.style.cssText="padding:3px;z-index:100;position:absolute;left:0;top:0;cursor:pointer;background-color:#fff;font: 12px 'Helvetica Neue', Helvetica, Arial, sans-serif;"},update:function(){this.stats&&this.stats.update()},remove:function(){this.el&&this.el.parentNode===document.body&&document.body.removeChild(this.el)}},d.Vector=function(a,b){this.x=a,this.y=b},d.Vector.prototype.dot=function(a){return this.x*a.x+this.y*a.y},d.Vector.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},d.Vector.prototype.normalize=function(){var a=1/this.length();return this.x*=a,this.y*=a,this},d.Vector.prototype.multiply=function(a){return new d.Vector(this.x*a,this.y*a)},d.Vector.prototype.tx=function(a){return this.x+=a.x,this.y+=a.y,this},Emit.mixin(d),Emit.mixin(d.Stage),Emit.mixin(e),d.collections=[],d.framerate=d.desiredFramerate=60,d.timeScale=1;var g=Date.now();return d.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d});